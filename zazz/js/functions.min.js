function trim(p){return p.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}
function doStuff(){$(document).ready(function(){function p(a,b,c){$("#-zazz-modal-confirm .-zazz-modal-header")[0].innerHTML=a;$("#-zazz-modal-confirm .-zazz-modal-body")[0].innerHTML=b;$("#-zazz-modal-confirm .-zazz-modal-button")[0].onclick=c;$("#-zazz-modal-confirm").center().show()}function h(a,b,c){"undefined"===typeof c&&(c="");$("#-zazz-modal-alert .-zazz-modal-body").html(b);$("#-zazz-modal-alert .-zazz-modal-header").html(a);$("#-zazz-modal-alert").attr("style",c).center().show()}function q(){"undefined"!==
typeof $.last_div&&$.last_div.css("box-shadow","");var a=$(".-zazz-content").attr("data-zazz-rid",$.row_id).attr("data-zazz-gid",$.group_id).attr("data-zazz-eid",$.element_id)[0].outerHTML;$.post("/zazz/ajax/layout.php",{page_id:$("#-zazz-page-id").val(),layout:a});"undefined"!==typeof $.last_div&&v($.last_div)}function r(a,b,c,d,e){"undefined"===typeof e&&(e=!1);b={zazz_id:a,type:c,code:b.val(),page_id:$("#-zazz-page-id").val(),zazz_order:b.attr("data-zazz-order"),insert:d};e?b.deleted=!0:b.insert=
d;$("#-zazz-loader-bar").promote();$.post("/zazz/ajax/code.php",b,function(b){$("#-zazz-loader-bar").demote();"begin-project"===a||"end-project"===a||"begin-web-page"===a||"end-web-page"===a?("html"===c&&location.reload(),$(".-zazz-content-view").first().html(b)):($('.-zazz-element[data-zazz-id="'+a+'"]').html(b),$(".-zazz-code-block-"+a).filter(".-zazz-js-code").each(function(){w($(this).val())}))})}function x(a){var b;a.hasClass("-zazz-html-code")?b="html":a.hasClass("-zazz-css-code")?b="css":a.hasClass("-zazz-mysql-code")?
b="mysql":a.hasClass("-zazz-php-code")?b="php":a.hasClass("-zazz-js-code")&&(b="js");return b}function y(a){a=a.attr("class").split(/\s+/);for(var b,c=0;c<a.length;c++)0<=a[c].indexOf("-zazz-code-block-")&&(b=a[c].substring(17));return b}function z(){$(this)[0].scrollIntoView()}function A(a,b){var c="-zazz-css-code-"+a;0===$("#"+c).length?(c=$("<style></style>").attr("id",c).html(b),$("head").append(c)):$("#"+c).html(b)}function w(a){try{eval(a)}catch(b){$("#-zazz-modal-alert").is(":visible")||h("Error",
"There was an error in your JavaScript: <br>"+b.message)}}function B(){window.onbeforeunload=function(){return"You have unsaved code that will be lost if you continue to navigate away. You will need the text area you were working on to lose focus in order for your code to be saved."}}function v(a){a.css("box-shadow","0px 0px 100px blue inset")}function C(a){var b=$("#-zazz-page-name").val();$("#-zazz-loader-bar").promote();$.post("/zazz/ajax/page.php",{page:b,page_id:$("#-zazz-page-id").val(),visible:"Yes"===
$("#-zazz-page-visible").val()?"1":"0"},function(c){$("#-zazz-loader-bar").demote();""!==trim(c)?($("#-zazz-modal-settings .-zazz-modal-message").html(c),$("#-zazz-modal-settings").show()):a&&window.location.replace("/zazz/build/"+$("#-zazz-project-name").val()+"/"+b)})}function I(a){var b=$("#-zazz-project-name").val();$("#-zazz-loader-bar").promote();$.post("/zazz/ajax/project.php",{project:b,page_id:$("#-zazz-page-id").val()},function(c){$("#-zazz-loader-bar").demote();""!==trim(c)?($("#-zazz-modal-project .-zazz-modal-message").html(c),
$("#-zazz-modal-project").show()):a&&window.location.replace("/zazz/build/"+b+"/"+$("#-zazz-page-name").val())})}function D(a){$(".-zazz-horizontal-line-left").css("top",a.pageY).css("right",$("body").width()-(a.pageX-10));$(".-zazz-horizontal-line-right").css("top",a.pageY).css("left",a.pageX+10);$("#-zazz-location-display").html("( "+a.pageX+" , "+a.pageY+" ) ")}function E(){$(".-zazz-horizontal-line-left").show();$(".-zazz-horizontal-line-right").show();$("body").css("cursor","crosshair");$("#-zazz-modal-mouse").show()}
function t(){$(".-zazz-horizontal-line-left").hide();$(".-zazz-horizontal-line-right").hide();$("body").css("cursor","default");$("#-zazz-modal-mouse").hide()}function F(a){$(".-zazz-vertical-line-top").css("left",a.pageX).css("bottom",$("body").height()-(a.pageY-10));$(".-zazz-vertical-line-bottom").css("left",a.pageX).css("top",a.pageY+10)}function G(){$(".-zazz-vertical-line-top").show();$(".-zazz-vertical-line-bottom").show();$("body").css("cursor","crosshair");$("#-zazz-modal-mouse").show()}
function u(){$(".-zazz-vertical-line-top").hide();$(".-zazz-vertical-line-bottom").hide();$("body").css("cursor","default");$("#-zazz-modal-mouse").hide()}function k(a,b){var c=$("<div></div>").addClass(b).attr("id",a);if("-zazz-element"===b){c.attr("tabindex","10").attr("data-zazz-order","1").attr("data-zazz-id",a);var d=H("-zazz-css-code",a);d.val("#"+a+" {\n\n}");$(".-zazz-code-blocks").append(d);r(a,d,"css",!0)}return c}function l(a,b){var c=a.parent();"undefined"===typeof b&&(b=!1);return b||
"auto"===a.css("z-index")?(c=c.outerWidth()-parseInt(c.css("padding-left"))-parseInt(c.css("padding-right")),a.outerWidth()/c*100+"%"):a.outerWidth()+"px"}function H(a,b){var c=$('.-zazz-element[data-zazz-id="'+b+'"]'),d;d=0===c.length?"0":c.attr("data-zazz-order");d=$("<textarea></textarea>").addClass("-zazz-code-block").addClass(a).addClass("-zazz-code-block-"+b).attr("spellcheck",!1).attr("tabindex","10").attr("data-zazz-order",d);c.attr("data-zazz-order",parseInt(c.attr("data-zazz-order"))+1);
return d}function s(a){var b=$.last_div.attr("data-zazz-id"),c=H("-zazz-"+a+"-code",b);$(".-zazz-code-blocks").append(c);c.fadeIn(300).focus();r(b,c,a,!0)}$.fn.center=function(){this.css("position","absolute");this.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px");this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px");return this};$.fn.promote=function(){var a=this.attr("promote-rank");"undefined"===typeof a&&
(a=0);a++;this.attr("promote-rank",a);1===a&&this.css("display","inline-block");return this};$.fn.demote=function(){var a=this.attr("promote-rank");"undefined"===typeof a&&(a=0);a--;this.attr("promote-rank",a);0===a&&this.hide();return this};$.fn.register=function(a,b,c){var d=$(this).attr("class").split(" ")[0];$.fn.register.initialize[d]=a;$.fn.register.action[d]=b;$.fn.register.clean[d]=c;$(this).click(function(){var a=$(this).attr("class").split(" ")[0];a!==$.fn.register.current&&($.fn.register.first=
!0,null!==$.fn.register.current&&($("."+$.fn.register.current).removeClass("-zazz-active-btn"),$(this).register.clean[$.fn.register.current]()),$.fn.register.current=a,$(this).addClass("-zazz-active-btn"),$(this).register.initialize[$.fn.register.current]())});return this};$.fn.register.first=!0;$.fn.register.current=null;$.fn.register.initialize=[];$.fn.register.action=[];$.fn.register.clean=[];$.fn.register.reset=function(){null!==$.fn.register.current&&($.fn.register.clean[$.fn.register.current](),
$.fn.register.current=null);return this};$(".-zazz-content").click(function(a){null!==$.fn.register.current&&($.fn.register.action[$.fn.register.current]($(a.target),a,$.fn.register.first),$.fn.register.first=!1)});$.fn.drag=function(a,b,c){var d=$(this).attr("class").split(" ")[0];$(this).mousedown(function(b){if(!$(b.target).is("input")){var c=$(this).attr("class").split(" ")[0];$.fn.drag.condition[c]=!0;$(document).on("mousemove",$.fn.drag.during[c]);a(b);return!1}});$(this).mouseup(function(a){var b=
$(this).attr("class").split(" ")[0];$.fn.drag.condition[b]=!1;$(document).off("mousemove",$.fn.drag.during[b]);c(a);return!1});$.fn.drag.during[d]=b;return this};$.fn.drag.condition=[];$.fn.drag.during=[];$(".-zazz-modal-close").click(function(){$(this).closest(".-zazz-modal").fadeOut(300)});$(document).on("input propertychange",".-zazz-code-block",function(){$.changed=!0;B()}).on("keypress",function(a){if(8===a.keyCode||8===a.which||46===a.keyCode||46===a.which)$.changed=!0,B()});$(document).on("focus",
"textarea",z);$(document).on("blur",".-zazz-css-code",function(){A($.last_div.attr("data-zazz-id"),$(this).val())});$(document).on("blur",".-zazz-js-code",function(){});$(document).on("blur",".-zazz-html-code",function(){});$(document).on("blur",".-zazz-code-block",function(){var a,b=$(this);a=x(b);var c=$.last_div.attr("data-zazz-id");window.onbeforeunload=null;$.changed&&(r(c,b,a,!1),$.changed=!1);b.attr("data-zazz-cursor",b.prop("selectionStart")).attr("data-zazz-scroll",b.scrollTop())}).on("focus",
".-zazz-code-block",function(){var a=$(this),b=parseInt(a.attr("data-zazz-cursor"));setTimeout(function(){0===a.prop("selectionStart")&&(a[0].setSelectionRange(b,b),a.scrollTop(parseInt(a.attr("data-zazz-scroll"))))},1)});$(document).on("focus",".-zazz-element",function(){var a=$(this);"undefined"!==typeof $.last_div&&$.last_div.css("box-shadow","");v(a);a.parent().hasClass("-zazz-hidden")?$(".-zazz-fixed-status-btn").html("W: 0 H: 0"):$(".-zazz-fixed-status-btn").html("W: "+l(a)+" H: "+a.css("min-height"));
var b=a.attr("data-zazz-id");$(".-zazz-id-input").val(a.attr("id"));$(".-zazz-class-input").val(a.attr("class").replace("-zazz-element","").replace("-zazz-outline",""));if("undefined"===typeof $.last_div||a.attr("data-zazz-id")!==$.last_div.attr("data-zazz-id"))$(".-zazz-code-block").hide(),$(".-zazz-code-block-"+b).fadeIn(300);$.last_div=a;return!1});$("#-zazz-page-height").blur(function(){var a=$(this);if(""!==trim(a.val())&&a.val()!==a.attr("data-zazz-old-height")){var b=parseInt(a.val())/parseInt(a.attr("data-zazz-old-height"));
$(".-zazz-element").each(function(){var a=$(this);a.css("min-height",Math.round(parseInt(a.css("min-height"))*b))});a.attr("data-zazz-old-height",parseInt(a.val()))}q()});$("#-zazz-project-name").blur(function(){I(!0)});$("#-zazz-page-name").blur(function(){C(!0)});$("#-zazz-page-visible").change(function(){C(!1)});$("#-zazz-deploy-link").click(function(){$(this).attr("href","/zazz/view/"+$("#-zazz-project-name").val()+"/"+$("#-zazz-page-name").val()+"?deploy="+encodeURIComponent($("#-zazz-deploy-password").val()))});
$(document).mousemove(function(a){$.mouse_x=a.pageX;$.mouse_y=a.pageY});$(".-zazz-content").mousemove(function(a){var b=$(a.target);b.hasClass("-zazz-outline")&&(b=$.last_div);var c=a.offsetX||a.clientX-b.offset().left,d=a.offsetY||a.clientY-b.offset().top,e=b.outerHeight(),g=b.outerWidth(),n=$("body").outerHeight(),f=$("body").outerWidth(),h=$("#-zazz-modal-mouse"),k=$(".-zazz-content-view"),l=$(".-zazz-content").outerHeight(),m=k.offset().top,k=k.outerHeight();a.pageX>f/2?h.css("left","0").css("right",
""):h.css("right","0").css("left","");a.pageY>m+k/2?h.css("top",m).css("bottom",""):h.css("bottom",n-(m+k)).css("top","");$("#-zazz-modal-mouse-offset").html("<td>Offset (px):</td><td>("+d+",</td><td>"+(b.outerWidth()-c)+",</td><td>"+($(a.target).outerHeight()-d)+",</td><td>"+c+")</td>");$("#-zazz-modal-mouse-location").html("<td>Page (px):</td><td>("+(a.pageY-m)+",</td><td>"+(f-a.pageX)+",</td><td>"+(l-(a.pageY-m))+",</td><td>"+a.pageX+")</td>");$("#-zazz-modal-mouse-offsetp").html("<td>Offset (%):</td><td>("+
Math.round(d/e*1E4)/100+",</td><td>"+Math.round((g-c)/g*1E4)/100+",</td><td>"+Math.round((e-d)/e*1E4)/100+",</td><td>"+Math.round(c/g*1E4)/100+")</td>");$("#-zazz-modal-mouse-locationp").html("<td>Page (%):</td><td>("+Math.round((a.pageY-m)/l*1E4)/100+",</td><td>"+Math.round((f-a.pageX)/f*1E4)/100+",</td><td>"+Math.round((l-(a.pageY-m))/l*1E4)/100+",</td><td>"+Math.round(a.pageX/f*1E4)/100+")</td>")});$(".-zazz-code-blocks").on("focus",".-zazz-html-code, .-zazz-php-code, .-zazz-mysql-code, .-zazz-js-code",
z).on("mousemove",".-zazz-html-code, .-zazz-php-code, .-zazz-mysql-code, .-zazz-js-code",function(a){var b=$(this).offset();b.bottom=$(this).offset().top+$(this).outerHeight();b.right=$(this).offset().left+$(this).outerWidth();b.left=$(this).offset().left;b.bottom>a.pageY&&a.pageY>b.bottom-15&&b.right>a.pageX&&a.pageX>b.right-15?$(this).css({cursor:"e-resize"}):18+b.top>a.pageY&&a.pageY>b.top&&b.left+18>a.pageX&&a.pageX>b.left?$(this).css({cursor:"pointer"}):$(this).css({cursor:""})}).on("click",
".-zazz-html-code, .-zazz-php-code, .-zazz-mysql-code, .-zazz-js-code",function(a){var b=$(this).offset();b.left=$(this).offset().left;18+b.top>a.pageY&&a.pageY>b.top&&b.left+18>a.pageX&&a.pageX>b.left&&(a=$(this),b=y(a),r(b,a,x(a),!1,!0),$(this).remove())}).on("mousemove",".-zazz-css-code",function(a){var b=$(this).offset();b.bottom=$(this).offset().top+$(this).outerHeight();b.right=$(this).offset().left+$(this).outerWidth();b.bottom>a.pageY&&a.pageY>b.bottom-15&&b.right>a.pageX&&a.pageX>b.right-
15?$(this).css({cursor:"e-resize"}):$(this).css({cursor:""})});$(".-zazz-code-area .-zazz-navbar").not('input[type="text"]').drag(function(){},function(a){var b=8;$(".-zazz-divide-navbar").is(":visible")&&(b=40);$(".-zazz-code-area").height(($("body").height()-(a.pageY-b))/$("body").height()*100+"%");$(".-zazz-view").height((a.pageY-b)/$("body").height()*100+"%");$(document).css("cursor: n-resize")},function(){}).on("selectstart",!1).on("dragstart",!1);$(".-zazz-id-input").blur(function(){"undefined"!==
typeof $.last_div&&$.last_div.attr("id",$(this).val())});$(".-zazz-class-input").blur(function(){"undefined"!==typeof $.last_div&&$.last_div.attr("class",$(this).val()+" -zazz-element -zazz-outline")});$(".-zazz-database-btn").click(function(){$("#-zazz-modal-database").center().show()});$("#-zazz-modal-database-edit").click(function(){$("#-zazz-modal-database-form").submit()});$(".-zazz-select-btn").register(function(){},function(){},function(){});$(".-zazz-vertical-btn").register(function(){$(".-zazz-content-view").on("mousemove",
F);$(".-zazz-content-view").on("mouseenter",G);$(".-zazz-content-view").on("mouseleave",u);$("#-zazz-fixed").css("display","inline-block");$("#-zazz-fixed-vertical").show()},function(a,b){var c=0<parseInt(a.css("z-index"))?!0:!1,d=$("#-zazz-fixed-vertical").val();if(c&&"Both"!==d)h("Warning","You cannot have a child element that has a dynamic width for a fixed width element.");else if(c||"Both"!==d){var e=a.outerWidth(),g=b.pageX-a.offset().left,n=e-g,e=k("element-"+$.element_id,"-zazz-element");
$.element_id++;if(c)a.css("width",g),e.css("width",n).css("z-index","1"),e.insertAfter(a);else{var f;if("Left"===d||"Right"===d)a.parent().hasClass("-zazz-container")?f=a.parent():(f=$("<div></div>").addClass("-zazz-container").css("width",a.outerWidth()/a.parent().outerWidth()*100+"%"),a.css("width",""),f.insertAfter(a),f.append(a));"Left"===d?(f.css("padding-left",parseInt(f.css("padding-left"))+g).css("margin-left",parseInt(f.css("margin-left"))-g),e.css("width",g).css("z-index","1"),e.insertBefore(f)):
"Right"===d?(f.css("padding-right",parseInt(f.css("padding-right"))+n).css("margin-right",parseInt(f.css("margin-right"))-n),e.css("width",n).css("z-index","1"),e.insertAfter(f)):"None"===d&&(f=a.parent(),c=f.outerWidth()-parseInt(f.css("padding-left"))-parseInt(f.css("padding-right")),g=g/c*100,c=a.outerWidth()/c*100,a.css("width",g+"%"),e.css("width",c-g+"%"),e.insertAfter(a))}e.css("min-height",a.css("min-height"));a.focus();q()}else h("Warning","You cannot have both children elements have fixed width for a dynamic width element.")},
function(){u();$(".-zazz-content-view").off("mouseenter",G);$(".-zazz-content-view").off("mouseleave",u);$(".-zazz-content-view").off("mousemove",F);$("#-zazz-fixed").hide();$("#-zazz-fixed-vertical").hide()});$(".-zazz-across-btn").register(function(){$(".-zazz-content-view").on("mousemove",D);$(".-zazz-content-view").on("mouseenter",E);$(".-zazz-content-view").on("mouseleave",t)},function(a,b){var c,d,e;c=a.parent();1===c.children().length&&c.hasClass("-zazz-row")?(c.parent(),d=c):(c=k("row-group-"+
$.group_id,"-zazz-row-group"),c.css("width",l(a)),a.css("width",""),c.insertAfter(a),d=k("row-"+$.row_id,"-zazz-row"),$.group_id++,$.row_id++,c.append(d),d.append(a));e=k("row-"+$.row_id,"-zazz-row");c=k("element-"+$.element_id,"-zazz-element");e.append(c);$.row_id++;$.element_id++;e.insertAfter(d);e=a.outerHeight();d=a.offset().top;e-=b.pageY-d;a.css("min-height",b.pageY-d);c.css("min-height",e);"auto"!==a.css("z-index")&&c.css("z-index",a.css("z-index"));a.focus();q()},function(){t();$(".-zazz-content-view").off("mousemove",
D);$(".-zazz-content-view").off("mouseenter",E);$(".-zazz-content-view").off("mouseleave",t)});$(".-zazz-absorb-btn").register(function(){},function(a,b,c){if("undefined"===typeof this.first_div||c)this.first_div=a;else if(a[0]!==this.first_div[0]){b=$(a);a=$(this.first_div);var d=b.parent();c=a.parent();var e=d.parent(),g=c.parent();c.hasClass("-zazz-container")&&d.hasClass("-zazz-container")||c.hasClass("-zazz-row")&&d.hasClass("-zazz-row")&&d.get(0)===c.get(0)?(c=l(a),d=l(b),b.remove(),0<parseInt(a.css("z-index"))&&
0<parseInt(b.css("z-index"))?a.css("width",parseInt(c)+parseInt(d)+"px"):a.css("width",parseFloat(c)+parseFloat(d)+"%")):c.hasClass("-zazz-container")&&d.hasClass("-zazz-row")&&d.get(0)===g.get(0)?(d=b.outerWidth(),e=b.index(),b.remove(),1===g.children().length?(c.children().each(function(){g.append($(this))}),c.remove()):e<c.index()?(c.css("margin-left",parseInt(c.css("margin-left"))+d),c.css("padding-left",parseInt(c.css("padding-left"))-d)):(c.css("margin-right",parseInt(c.css("margin-right"))+
d),c.css("padding-right",parseInt(c.css("padding-right"))-d))):d.hasClass("-zazz-container")&&c.hasClass("-zazz-row")&&c.get(0)===e.get(0)?h("Error","You cannot absorb a dynamic width element into a fixed width element."):e.get(0)===g.get(0)?1!==d.children().length||1!==c.children().length?h("Error","Both rows must only have one element before you can combine them."):(a.css("min-height",parseInt(b.css("min-height"))+parseInt(a.css("min-height"))),b.parent().remove(),b=a.parent().parent(),1!==b.children().length||
b.parent().hasClass("-zazz-content")||(a.css("width",l(b)),a.insertBefore(b),b.remove())):h("Error","These elements are neither in the same row or column.");a.focus();delete this.first_div;q()}},function(){$(".-zazz-element").css("cursor","")});$("#-zazz-edit-page-btn").click(function(){$("#-zazz-modal-settings").show().center()});$(".-zazz-project-btn").click(function(){var a=$(this).offset();$("#-zazz-dropdown-project").show().css("top",a.top+$(this).outerHeight()).css("left",a.left)}).blur(function(){setTimeout(function(){"-zazz-edit-project-btn"===
document.activeElement.id?$("#-zazz-modal-project").show().center():"-zazz-new-project-btn"===document.activeElement.id?$("#-zazz-modal-new-project").show().center():"-zazz-switch-project-btn"===document.activeElement.id?$("#-zazz-modal-view-projects").show().center():"-zazz-delete-project-btn"===document.activeElement.id&&(1<$("#-zazz-modal-view-pages .-zazz-links a").length?p("Are you sure?","By deleting this project, you will remove all code and pages.",function(){$("#-zazz-loader-bar").promote();
$.post("/zazz/ajax/project.php",{page_id:$("#-zazz-page-id").val(),deleted:"true"},function(){window.location.href="/zazz/index.php"})}):h("Warning","You cannot delete your only project."));$("#-zazz-dropdown-project").hide()},1)});$("#-zazz-make-new-project").click(function(){$("#-zazz-loader-bar").promote();$.post("/zazz/ajax/project.php",{create:$("#-zazz-new-project-name").val()},function(a){$("#-zazz-loader-bar").demote();""!==trim(a)?$("#-zazz-modal-new-project .-zazz-modal-message").html(a):
window.location.href="/zazz/build/"+$("#-zazz-new-project-name").val()+"/"})});$(".-zazz-page-btn").click(function(){var a=$(this).offset();$("#-zazz-dropdown-page").show().css("top",a.top+$(this).outerHeight()).css("left",a.left)}).blur(function(){setTimeout(function(){"-zazz-edit-page-btn"===document.activeElement.id?$("#-zazz-modal-settings").show().center():"-zazz-new-page-btn"===document.activeElement.id?$("#-zazz-modal-new-page").show().center():"-zazz-switch-page-btn"===document.activeElement.id?
$("#-zazz-modal-view-pages").show().center():"-zazz-delete-page-btn"===document.activeElement.id&&(1<$("#-zazz-modal-view-pages .-zazz-links a").length?p("Are you sure?","By deleting this page, you will remove all code.",function(){$("#-zazz-loader-bar").promote();$.post("/zazz/ajax/page.php",{page_id:$("#-zazz-page-id").val(),deleted:"true"},function(){window.location.href="/zazz/index.php"})}):h("Warning","You cannot delete your only page."));$("#-zazz-dropdown-page").hide()},1)});$("#-zazz-make-new-page").click(function(){$("#-zazz-loader-bar").promote();
$.post("/zazz/ajax/page.php",{page_id:$("#-zazz-page-id").val(),create:$("#-zazz-new-page-name").val(),template:$("#-zazz-page-template").val()},function(a){$("#-zazz-loader-bar").demote();""!==trim(a)?$("#-zazz-modal-new-page .-zazz-modal-message").html(a):window.location.href="/zazz/build/"+$("#-zazz-project-name").val()+"/"+$("#-zazz-new-page-name").val()})});$("#-zazz-deploy-project-btn").click(function(){$("#-zazz-modal-deploy-confirm").center().show()});$("#-zazz-upload-filename").focus(function(){$("#-zazz-upload-file").click();
$(this).blur()});$("#-zazz-upload-file").change(function(){var a=$(this).val();$("#-zazz-upload-filename").val(a);var b=a.lastIndexOf("/");if(0>b&&(b=a.lastIndexOf("\\"),0>b)){$("#-zazz-upload-filename").val(a);return}a=a.slice(b-a.length+1);$("#-zazz-upload-server").val(a)});$(".-zazz-upload-btn").click(function(){$("#-zazz-modal-upload").center().show()});$("#-zazz-upload-do-it").click(function(){$("#-zazz-upload-name").val($("#-zazz-upload-server").val());$("#-zazz-upload-page-id").val($("#-zazz-page-id").val());
$("#-zazz-upload-form").submit()});$(".-zazz-html-btn").click(function(){s("html")});$(".-zazz-php-btn").click(function(){s("php")});$(".-zazz-mysql-btn").click(function(){s("mysql")});$(".-zazz-js-btn").click(function(){s("js")});(function(){var a=$(".-zazz-content");$(".-zazz-element").first().focus();$(".-zazz-select-btn").click();$.row_id=a.attr("data-zazz-rid");$.group_id=a.attr("data-zazz-gid");$.element_id=a.attr("data-zazz-eid");$(".-zazz-css-code").each(function(){var a=$(this);A(y(a),a.val())});
$(".-zazz-js-code").each(function(){var a=$(this);w(a.val())});$("#-zazz-page-height").val($(".-zazz-content").outerHeight()).attr("data-zazz-old-height",$(".-zazz-content").outerHeight());jQueryScriptOutputted&&h("Error","Could not find jQuery file specified in HTML header. Loaded a copy from Zazz instead.")})();$(document).keyup(function(a){if(13===a.which||13===a.keyCode){var b=$(".-zazz-modal:visible");if(0!==b.length){var b=b.first(),c=b.children(".-zazz-modal-footer").children(".-zazz-modal-button");
0!==c.length?c.first().click():b.children(".-zazz-modal-footer").children(".-zazz-modal-close").first().click()}else{var d=$(":focus");d.is("textarea")?setTimeout(function(){var a=d.prop("selectionStart"),b=d.val(),c=b.substr(0,a),a=b.substr(a,b.length),b=c.split("\n"),b=b[b.length-2].match(/^\s*/)[0];d.val(c+b+a);d[0].setSelectionRange(c.length+b.length,c.length+b.length)},1):d.click()}}if(27===a.keyCode||27===a.which)b=$(".-zazz-modal:visible"),0!==b.length&&b.children(".-zazz-modal-footer").children(".-zazz-modal-close").first().click(),
$(".-zazz-select-btn").click();120!==a.keyCode&&120!==a.which||!a.ctrlKey||$(".-zazz-select-btn").focus();121!==a.keyCode&&121!==a.which||!a.ctrlKey||$.last_div.focus();122!==a.keyCode&&122!==a.which||!a.ctrlKey||$(".-zazz-id-input").focus();if((123===a.keyCode||123===a.which)&&a.ctrlKey){a=$(".-zazz-code-blocks");for(b=a.children(":visible");0!==b.length;)a=b.first(),b=a.children(":visible");a.focus()}});$("#-zazz-bad-html").val()&&h("Error","There was an error when Zazz tried to combine the HTML entered for begin-project, end-project, begin-web-page, end-web-page, which forced Zazz to use a default HTML frame instead. Please examine the HTML for those elements so that your HTML frame can be loaded.")})}
var jQueryScriptOutputted=!1;function initJQuery(){"undefined"===typeof jQuery?(jQueryScriptOutputted||(jQueryScriptOutputted=!0,document.write('<script type="text/javascript" src="/zazz/js/jquery-1.10.2.js">\x3c/script>')),setTimeout("initJQuery()",50)):doStuff()}initJQuery();
