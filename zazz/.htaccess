#php_flag display_errors off
php_flag magic_quotes_gpc Off
php_value date.timezone "America/New_York"
php_value upload_max_filesize 1M
php_value post_max_size 1M
php_value max_execution_time 500
php_value max_input_time 500
php_value memory_limit 256M

DirectoryIndex index.php

Options -Indexes
Options +FollowSymlinks
RewriteEngine On
RewriteBase /

#Reroute Zazz sandbox files to the right location
RewriteRule ^build/(.*?)/css/style.css$ zazz/css/style.css [QSA]
RewriteRule ^build/(.*?)/css/images/(.*?)$ zazz/css/images/$2 [QSA]
RewriteRule ^build/(.*?)/js/functions.js$ zazz/js/functions.js [QSA]

#This allows people to reference their project resources with relative paths within Zazz sandbox.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^build/(.*?)/resources/(.*?)$ zazz/view.php?project=$1&page=css/resources$2 [QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^build/(.*?)/js/(.*?)$ zazz/view.php?project=$1&page=js/$2 [QSA]

# Rewrite file system-like URLs to code to something that Zazz can understand.
RewriteRule ^build/(.*?)/(.*?)$ zazz/index.php?project=$1&page=$2 [QSA]

#All accesses need to be proxied in some way so that credentials can be checked.
RewriteRule ^view/(.*?)/(.*?)$ zazz/view.php?project=$1&page=$2 [QSA]

#Deny access to includes folder.
RewriteRule ^includes/ - [F,L,NC]
#RewriteRule ^zazz/js/functions.js$ zazz/js/functions.min.js [QSA]
#RewriteRule ^zazz/js/jquery-1.10.2.js$ zazz/js/jquery-1.10.2.min.js [QSA]
#RewriteRule ^zazz/css/style.css$ zazz/css/style.min.js [QSA]

# Remove PHP extension for all.
#RewriteRule ^(.*)$ $1.php [L] # Remove PHP extension.

# compress text, html, javascript, css, xml:
# AddOutputFilterByType DEFLATE text/plain
# AddOutputFilterByType DEFLATE text/html
# AddOutputFilterByType DEFLATE text/xml
# AddOutputFilterByType DEFLATE text/css
# AddOutputFilterByType DEFLATE application/xml
# AddOutputFilterByType DEFLATE application/xhtml+xml
# AddOutputFilterByType DEFLATE application/rss+xml
# AddOutputFilterByType DEFLATE application/javascript
# AddOutputFilterByType DEFLATE application/x-javascript